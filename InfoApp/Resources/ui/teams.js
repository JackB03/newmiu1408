// DATA
var theData = {
	"team": {
		"information": [
			{
				"name": "Dallas Generals",
				"image": "http://i483.photobucket.com/albums/rr200/JackB03/290140787_zps3449a705.jpg",
				"career": "CAREER",
				"lws": 'Longest Win Streak: 5',
				"tp": 'Total Points: 4,581',
				"bcf": 'Best Conference Finish: 1st',
				"bof": 'Best Overall Finish: 1st',
				"season": 'SINGLE SEASON',
				"mw": 'Most Wins: 9',
				"his": 'Highest Score: 145',
				"cw": 'Conference Wins: 5',
				"pw": 'Playoff Wins: 4',
				"rating": "RATE THIS TEAM",
				// "star": 4,
				"about": "ABOUT THE OWNER",
				"ownerInfo": 'The owner, Jack Bonner, has owned this team since the beginning of the league, back in 2010. He is also the League Commissioner. His most successful team was in 2010, when each was allowed to keep 5 players each year. His best pickup, in the draft, was Arian Foster. Foster became the top running back for the year and lead them to the Super Bowl, winning in fashion. Mr. Bonner is still a believer in the old-school ways of having 3 solid running backs.',
				"history": 'HISTORY OF THE TEAM',
				"teamInfo": 'Since 2010, the Generals have been the highest scoring team each season. They have reached the Super Bowl twice(2010, 2012) and winning one of them. They are the leader in trophy points and considered one of the best teams ever. They are known for relying on the running backs to win games and score points. In 2013, however, they failed to make it to the playoffs and having a losing season.',
				"more": "/moreTeam/DGmore.js"
			},
			{
				"name": "The Tune Squad",
				"image": "http://i483.photobucket.com/albums/rr200/JackB03/IMG_0138_zpsf4bf54e9.jpeg",
				"career": "CAREER",
				"lws": 'Longest Win Streak: 5',
				"tp": 'Total Points: 4,205',
				"bcf": 'Best Conference Finish: 1st',
				"bof": 'Best Overall Finish: 1st',
				"season": 'SINGLE SEASON',
				"mw": 'Most Wins: 8',
				"his": 'Highest Score: 156',
				"cw": 'Conference Wins: 3',
				"pw": 'Playoff Wins: 6',
				"rating": "RATE THIS TEAM",
				// "star": 5,
				"about": "ABOUT THE OWNER",
				"ownerInfo": 'Robbie DeLeon took over the team in 2012, after the death of long-time owner, Jack H. Bonner, Jr. Since 2012, Mr. DeLeon has taken complete control of the league and had his brightest season in 2013. He won Coach of The Year, Allowed The Fewest Points, won the regular season and the Super Bowl!',
				"history": 'HISTORY OF THE TEAM',
				"teamInfo": 'This team has been to the Super Bowl twice(2011, 2013), winning them both. The team has never had the best of players, but seemed to always pull out the victory. The team is known for picking up the perfect free agents during the season. Since the new owner, the team now has one of the best running backs and wide-receivers in the game!',
				"more": "/moreTeam/TSmore.js"
			},
			{
				"name": "Dallas Pirates",
				"image": "http://i483.photobucket.com/albums/rr200/JackB03/3ea8802d-f4d9-4d4e-b930-911ce306139e_zps09dda45d.jpg",
				"career": "CAREER",
				"lws": 'Longest Win Streak: 4',
				"tp": 'Total Points: 4,079',
				"bcf": 'Best Conference Finish: 2nd',
				"bof": 'Best Overall Finish: 1st',
				"season": 'SINGLE SEASON',
				"mw": 'Most Wins: 7',
				"his": 'Highest Score: 140',
				"cw": 'Conference Wins: 2',
				"pw": 'Playoff Wins: 4',
				"rating": "RATE THIS TEAM",
				// "star": 3,
				"about": "ABOUT THE OWNER",
				"ownerInfo": 'Known as the, “Ultimate Owner”, Robert DeLeon has become the most well known owner in the league. He once took over the team, in midseason, and then ended up winning the Super Bowl. Trading is very difficult with him and he only trades when it’s in his favor. He reached the Super Bowl again last season!',
				"history": 'HISTORY OF THE TEAM',
				"teamInfo": 'The Pirates have had a roller coaster of a ride. But recently, they’ve become a very tough team to beat. In 2012, they entered the 1st Round of the playoffs and ended up tying 210-210. But since their opponent’s Quarterback had more points, the Pirates ended their playoff run. It was the closest playoff game in league history. In 2013, the Pirates made it to the Super Bowl again but lost. The game was, again, the closest Super Bowl game in league history!',
				"more": "/moreTeam/DPmore.js"
			},
			{
				"name": "Texas Cowgirls",
				"image": "http://i483.photobucket.com/albums/rr200/JackB03/txcowgirls_zpsfd77a346.jpg",
				"career": "CAREER",
				"lws": 'Longest Win Streak: 4',
				"tp": 'Total Points: 3,986',
				"bcf": 'Best Conference Finish: 1st',
				"bof": 'Best Overall Finish: 1st',
				"season": 'SINGLE SEASON',
				"mw": 'Most Wins: 8',
				"his": 'Highest Score: 151',
				"cw": 'Conference Wins: 3',
				"pw": 'Playoff Wins: 3',
				"rating": "RATE THIS TEAM",
				// "star": 4,
				"about": "ABOUT THE OWNER",
				"ownerInfo": 'The wife of Jack Bonner, Valerie Bonner, has been the only female owner for sometime. Not only that, but she has also been to the Super Bowl twice. Her only win, came when she had to face her husband, in 2012. In 2013, she had a rough year, when her young, star running back was injured for the season.!',
				"history": 'HISTORY OF THE TEAM',
				"teamInfo": 'The Cowgirls are still a young team compared to most. Yet, they achieved success very quickly. They now have one of the youngest teams in the league and expect to do very well.!',
				"more": "/moreTeam/TCmore.js"
			},
			{
				"name": "Richardson Cowboys",
				"image": "http://i483.photobucket.com/albums/rr200/JackB03/d77854f1-9b76-4bd6-ada2-c38e9132c6e7_zps3791788a.jpg",
				"career": "CAREER",
				"lws": 'Longest Win Streak: 3',
				"tp": 'Total Points: 3,575',
				"bcf": 'Best Conference Finish: 2nd',
				"bof": 'Best Overall Finish: 4th',
				"season": 'SINGLE SEASON',
				"mw": 'Most Wins: 6',
				"his": 'Highest Score: 154',
				"cw": 'Conference Wins: 4',
				"pw": 'Playoff Wins: 2',
				"rating": "RATE THIS TEAM",
				// "star": 4,
				"about": "ABOUT THE OWNER",
				"ownerInfo": 'Vinnie Todora took over this team midseason of 2012. The owner quit during the season and the league had to find a new owner. The team was dead last on top of that. He finished the season in last place. In 2013, he again finished last, but made a lot of trades to upgrade his players. After the 2014 draft, his team has never looked better.!',
				"history": 'HISTORY OF THE TEAM',
				"teamInfo": 'This team has had so many owners over the years. It has never been to the Super Bowl, but has made it too the 2nd Round of the playoffs before. With the dedicated owner in place, this team is young and improving each year.',
				"more": "/moreTeam/RCmore.js"
			},
		]		
	}
};	

		
var currentWindow = Ti.UI.currentWindow;
 
var dataBorder = Ti.UI.createView({
	backgroundColor: '#fff',
	height: 1,
	top: 1
});
		
var myInformation = Ti.UI.createTableView({
	top: dataBorder.height + dataBorder.top,
	backgroundColor: "#000"
});


myInformation.style = Ti.UI.iPhone.TableViewStyle.GROUPED;


var infoSection = Ti.UI.createTableViewSection({
	headerTitle: "JFL Teams"
});



var getDetail = function(dataSource){
	var detailWindow = Ti.UI.createWindow({
		backgroundColor: "#000",
			title: dataSource.title,
			barColor: '#1C1C1C',
			titleAttributes:  {
		        color:'#fff',
		        font: {fontFamily:'Times', fontSize:23},
		        shadow:{color:'#000', offset:{width:1,height:1}}
		   },
			borderWidth: 1,
			statusBarStyle: Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT
	});
	
		var nav2 = Ti.UI.iOS.createNavigationWindow({
			window: detailWindow
		});
		
		var detailBorder = Ti.UI.createView({
			backgroundColor: '#fff',
			height: 1,
			top: 1
	});
	
	
		var teamImage = Ti.UI.createImageView({
			image: dataSource.img,
			top: detailBorder.top + detailBorder.height + 5,
			right: 5,
			height: 125,
			width: 125
		});
	
		
		var career = Ti.UI.createLabel({
			text: dataSource.headingC,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 18, fontWeight: 'bold'},
			top: detailBorder.top + detailBorder.height + 15,
			textAlign: 'center',
			top: detailBorder.top + detailBorder.height + 5,
			left: 15
			
		});
		
		var winStreak = Ti.UI.createLabel({
			text: dataSource.longWin,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: career.top + 22,
			textAlign: 'center',
			left: 15
			
		});
		
		var totalPoints = Ti.UI.createLabel({
			text: dataSource.totalP,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: winStreak.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var bestConference = Ti.UI.createLabel({
			text: dataSource.bestConF,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: totalPoints.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var overall = Ti.UI.createLabel({
			text: dataSource.bestOvF,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: bestConference.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var singleSeason = Ti.UI.createLabel({
			text: dataSource.headingS,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 18, fontStyle: 'italic'},
			top: overall.top + 22,
			textAlign: 'center',
			left: 15
			
		});
		
		var mostWins = Ti.UI.createLabel({
			text: dataSource.mostWin,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: singleSeason.top + 22,
			textAlign: 'center',
			left: 15
			
		});
		
		var highScore = Ti.UI.createLabel({
			text: dataSource.hS,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: mostWins.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var confWins = Ti.UI.createLabel({
			text: dataSource.confW,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: highScore.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var playoffWins = Ti.UI.createLabel({
			text: dataSource.playW,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 12, fontStyle: 'italic'},
			top: confWins.top + 12,
			textAlign: 'center',
			left: 15
			
		});
		
		var teamRating = Ti.UI.createLabel({
			text: dataSource.headingTR,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 18, fontStyle: 'italic'},
			top: playoffWins.top + 30,
			textAlign: 'center',
			// left: 15
			
		});
		
		
		var slider = Titanium.UI.createSlider({
		    top: teamRating.top + 35,
		    min: 0,
		    max: 5,
		    width: '50%',
		    height: Titanium.UI.SIZE,
		    value: 0
		 });
		 
		 var sliderMessage = Ti.UI.createLabel({
			text: "Rated " + slider.value + " Out Of 5 Stars",
		    color: '#fff',
		    font: {fontFamily: "helvetica", fontSize: 15},
		    top: teamRating.top + 25,
		    });
		    
		
		slider.addEventListener('change', function(e) {
		    sliderMessage.text = String.format("%3.0f", e.value);
		});
		
		
		// Team Rating Star
		// var rating = Titanium.UI.createProgressBar({
    		// top: teamRating.top + 35,
    		// width: 250,
    		// height: 2,
    		// left: 15,
    		// min:0,
    		// max:5,
    		// value: dataSource.rating,
    		// message: dataSource.rating + " Stars",
    		// color:'red',
    		// style:Titanium.UI.iPhone.ProgressBarStyle.PLAIN,
		// });
		
		var aboutOwner = Ti.UI.createLabel({
			text: dataSource.abo,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 18, fontStyle: 'italic'},
			top: slider.top + 50,
			textAlign: 'center',
			// left: 15
			
		});
		
		var ownerInfo = Ti.UI.createLabel({
			text: dataSource.aboInfo,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 10, fontStyle: 'italic'},
			top: aboutOwner.top + 19,
			textAlign: 'center',
			left: 10,
			right: 10
			
		});
		
		var historyTeam = Ti.UI.createLabel({
			text: dataSource.hott,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 18, fontStyle: 'italic'},
			top: ownerInfo.top + 102,
			textAlign: 'center',
			// left: 15
			
		});
		
		var teamInfo = Ti.UI.createLabel({
			text: dataSource.hottInfo,
			color: "#fff",
			font: {fontFamily: "helvetica", fontSize: 10, fontStyle: 'italic'},
			top: historyTeam.top + 19,
			textAlign: 'center',
			left: 10,
			right: 10
			
		});
		
		// Nav Buttons
		var moreButton = Ti.UI.createButton({
			title: 'More'
		});
		
		var backButton = Ti.UI.createButton({
			title: " Back"
			
		});
		
	// Adding Buttons	
	detailWindow.rightNavButton = moreButton;
	detailWindow.leftNavButton = backButton;
	
	
	// Button Functions
	var moreWindow = function(){
		var newWindow = Ti.UI.createWindow({
			backgroundColor: "#000",
			title: 'More',
			barColor: '#1C1C1C',
			titleAttributes:  {
		        color:'#fff',
		        font: {fontFamily:'Times Roman', fontSize:23},
		        shadow:{color:'#000', offset:{width:2,height:2}}
		   },
			borderWidth: 1,
			statusBarStyle: Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,
			url:  dataSource.moreInfo
	});
	nav2.openWindow(newWindow);
	};
		
	
	var back = function(){
		nav2.close();
	};
	
	
	// Event Listeners
	moreButton.addEventListener("click", moreWindow);
	backButton.addEventListener("click", back);
	
	
	// Add to Window
	detailWindow.add(detailBorder, teamImage, career, winStreak, totalPoints, bestConference, overall, singleSeason, mostWins, highScore, confWins, playoffWins, teamRating, slider, sliderMessage, aboutOwner, ownerInfo, historyTeam, teamInfo);
	// rating.show();
	nav2.open();
		
};


for(var i=0, j=theData.team.information.length; i<j; i++){
	var theRow = Ti.UI.createTableViewRow({
		title: theData.team.information[i].name,
		img: theData.team.information[i].image,
		headingC: theData.team.information[i].career,
		longWin: theData.team.information[i].lws,
		totalP: theData.team.information[i].tp,
		bestConF: theData.team.information[i].bcf,
		bestOvF: theData.team.information[i].bof,
		headingS: theData.team.information[i].season,
		mostWin: theData.team.information[i].mw,
		hS: theData.team.information[i].his,
		confW: theData.team.information[i].cw,
		playW: theData.team.information[i].pw,
		headingTR: theData.team.information[i].rating,
		moreInfo: theData.team.information[i].more,
		abo: theData.team.information[i].about,
		aboInfo: theData.team.information[i].ownerInfo,
		hott: theData.team.information[i].history,
		hottInfo: theData.team.information[i].teamInfo,
		hasChild: true,
		backgroundColor: '#e8e8e8e',
		color: '#fff'
	});
	
	infoSection.add(theRow);
}


var myInfoSection = [infoSection];

myInformation.setData(myInfoSection);

myInformation.addEventListener("click", function(event){
	getDetail(event.source);
});


currentWindow.add(dataBorder, myInformation);




